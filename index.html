<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project 2030: æ†²æ³•å®ˆè­·è€…</title>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body { background-color:#111827; font-family:'Noto Sans TC',sans-serif; color:#e5e7eb; }
    .pixel-font { font-family:'Press Start 2P', monospace; }
    .retro-container { border:3px solid #3f3f46; box-shadow:6px 6px 0px #000; }
    .retro-btn { transition:all .08s; box-shadow:3px 3px 0px #000; }
    .retro-btn:active { transform:translate(2px,2px); box-shadow:1px 1px 0px #000; }

    /* âœ… CRT è¦–è¦ºå±¤ï¼šæ°¸é ä¸åƒé»æ“Š */
    .crt{ position:relative; }
    .crt::before{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:9999;
      background:
        linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.22) 50%),
        linear-gradient(90deg, rgba(255,0,0,0.05), rgba(0,255,0,0.02), rgba(0,0,255,0.05));
      background-size:100% 2px, 3px 100%;
      opacity:.7;
    }

    .pb-safe{ padding-bottom: env(safe-area-inset-bottom); }

    /* âœ… iOSï¼šé¿å…é»æ“Šç¸®æ”¾ã€æ”¹å–„è¼¸å…¥é«”é©— */
    input, button, select, textarea { font-size:16px; } /* iOS <16px æœƒè‡ªå‹•æ”¾å¤§/æ€ªè¡Œç‚º */
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    const GOAL_BTC = 3.0;
    const TARGET_DATE = new Date("2030-12-31").getTime();
    const SAVE_KEY = "project2030_save_github_pages_v3";

    const INITIAL_STATE = {
      btc: 0.0,
      coldWalletCount: 0.0,
      usdtReserve: 0,
      eth: 34.0,
      ada: 74000.0,
      logs: [],
      consecutiveGreedWeeks: 0,
      lastCheckDate: null,
    };

    function App(){
      const [gameState, setGameState] = useState(INITIAL_STATE);
      const [activeTab, setActiveTab] = useState("dashboard");
      const [modal, setModal] = useState(null);

      /**
       * âœ… é—œéµï¼šinputs ç”¨ã€Œå…©å±¤ã€
       * - draftï¼šä½ æ­£åœ¨è¼¸å…¥çš„å­—ä¸²ï¼ˆä¸æœƒé€ æˆéµç›¤äº‚è·³ï¼‰
       * - inputsï¼šçœŸæ­£åŸ·è¡Œé‚è¼¯ç”¨çš„æ•¸å€¼ï¼ˆåªåœ¨ blur æˆ–æŒ‰ EXECUTE æ™‚æ‰åŒæ­¥ï¼‰
       */
      const [draft, setDraft] = useState({
        btcPrice: "90000",
        ethBtcRatio: "0.05",
        adaBtcRatio: "0.000008",
      });

      const [inputs, setInputs] = useState({
        fngIndex: 50,
        btcPrice: 90000,
        ethBtcRatio: 0.05,
        adaBtcRatio: 0.000008,
      });

      // --- Load/Save ---
      useEffect(() => {
        try {
          const saved = localStorage.getItem(SAVE_KEY);
          if (saved) {
            const parsed = JSON.parse(saved);
            setGameState(parsed);

            // åŒæ­¥ draft / inputsï¼ˆé¿å…è®€æª”å¾Œä¸ä¸€è‡´ï¼‰
            setInputs(prev => ({
              ...prev,
              btcPrice: 90000,
              ethBtcRatio: 0.05,
              adaBtcRatio: 0.000008,
            }));
            setDraft({
              btcPrice: "90000",
              ethBtcRatio: "0.05",
              adaBtcRatio: "0.000008",
            });
          } else {
            addLog("ç³»çµ±åˆå§‹åŒ–å®Œæˆã€‚ç›®æ¨™ï¼š2030å¹´ç´¯ç© 3 BTCã€‚", "system");
          }
        } catch(e) {}
      }, []);

      useEffect(() => {
        localStorage.setItem(SAVE_KEY, JSON.stringify(gameState));
      }, [gameState]);

      const addLog = (msg, type="info") => {
        const timestamp = new Date().toLocaleDateString('zh-TW', {month:'2-digit', day:'2-digit'});
        const newLog = { id: Date.now() + Math.random(), date: timestamp, msg, type };
        setGameState(prev => ({ ...prev, logs: [newLog, ...prev.logs].slice(0, 80) }));
      };

      const daysRemaining = useMemo(() => {
        const diff = TARGET_DATE - Date.now();
        return Math.max(0, Math.ceil(diff / 86400000));
      }, []);

      const totalBTC = () => gameState.btc + gameState.coldWalletCount;
      const progress = () => Math.min(100, (totalBTC() / GOAL_BTC) * 100);

      // âœ… æŠŠ draft -> inputsï¼ˆåœ¨ blur æˆ–æŒ‰ä¸‹ EXECUTE ä¹‹å‰å‘¼å«ï¼‰
      const syncDraftToInputs = () => {
        const toNum = (s, fallback) => {
          const n = parseFloat(String(s).replace(/,/g,''));
          return Number.isFinite(n) ? n : fallback;
        };
        setInputs(prev => ({
          ...prev,
          btcPrice: toNum(draft.btcPrice, prev.btcPrice),
          ethBtcRatio: toNum(draft.ethBtcRatio, prev.ethBtcRatio),
          adaBtcRatio: toNum(draft.adaBtcRatio, prev.adaBtcRatio),
        }));
      };

      const checkAlerts = (ethRatio, adaRatio, currentState) => {
        if (ethRatio >= 0.06 && currentState.eth >= 10) {
          addLog(`è­¦å ±: ETH/BTC é” ${ethRatio}ï¼Œè«‹æª¢æŸ¥æˆ°ç•¥è½‰æ›ï¼`, "alert");
        }
        if (adaRatio >= 0.000010 && currentState.ada >= 40000) {
          addLog(`è­¦å ±: ADA/BTC é” ${adaRatio}ï¼Œé€ƒç”Ÿè‰™é–‹å•Ÿï¼`, "alert");
        }
      };

      const executeWeeklyStrategy = () => {
        // âœ… åŸ·è¡Œå‰å…ˆåŒæ­¥ï¼ˆä½ è¼¸å…¥åˆ°ä¸€åŠä¹Ÿä¸æœƒæ¼ï¼‰
        syncDraftToInputs();

        const { fngIndex } = inputs;
        const btcPrice = parseFloat(String(draft.btcPrice).replace(/,/g,''));

        if (!Number.isFinite(btcPrice) || btcPrice <= 0) {
          setModal({ title: "éŒ¯èª¤", content: "BTC åƒ¹æ ¼å¿…é ˆ > 0" });
          return;
        }

        let action = "";
        let usdtSpent = 0;
        let usdtSaved = 0;
        let btcBought = 0;
        let reserveUsed = 0;
        let greedCounter = gameState.consecutiveGreedWeeks;

        if (fngIndex < 20) {
          action = "æ¥µåº¦ææ…Œï¼å•Ÿå‹•å…¨è»çªæ“Š (3ä»½+é å‚™é‡‘)";
          usdtSpent = 180;
          if (gameState.usdtReserve > 0) {
            reserveUsed = Math.floor(gameState.usdtReserve * 0.25);
            usdtSpent += reserveUsed;
          }
          greedCounter = 0;
        } else if (fngIndex >= 20 && fngIndex <= 40) {
          action = "å¸‚å ´ææ‡¼ï¼ŒåŠ ç¢¼é€²æ”» (2ä»½è²·/1ä»½å­˜)";
          usdtSpent = 120;
          usdtSaved = 60;
          greedCounter = 0;
        } else if (fngIndex > 40 && fngIndex <= 75) {
          action = "å¸‚å ´å¹³ç©©ï¼Œä¿å®ˆæ¨é€² (1ä»½è²·/2ä»½å­˜)";
          usdtSpent = 60;
          usdtSaved = 120;
          greedCounter = 0;
        } else {
          if (greedCounter >= 8) {
            action = "å¼·åˆ¶æ¢æ¬¾ï¼šé•·ç‰›ä¿éšªå•Ÿå‹• (1ä»½è²·/2ä»½å­˜)";
            usdtSpent = 60;
            usdtSaved = 120;
            greedCounter += 1;
          } else {
            action = "å¸‚å ´è²ªå©ªï¼Œåœæ­¢è²·é€² (3ä»½å…¨å­˜)";
            usdtSpent = 0;
            usdtSaved = 180;
            greedCounter += 1;
          }
        }

        if (usdtSpent > 0) btcBought = usdtSpent / btcPrice;

        const newState = {
          ...gameState,
          btc: gameState.btc + btcBought,
          usdtReserve: gameState.usdtReserve + usdtSaved - reserveUsed,
          consecutiveGreedWeeks: greedCounter,
          lastCheckDate: new Date().toISOString(),
        };
        setGameState(newState);

        addLog(`é€±å ±: ${action}`, usdtSpent > 0 ? "success" : "warning");
        if (btcBought > 0) addLog(`è²·å…¥: ${btcBought.toFixed(8)} BTC @ ${btcPrice}`, "success");
        if (usdtSaved > 0) addLog(`é å‚™é‡‘ +${usdtSaved} U`, "info");
        if (reserveUsed > 0) addLog(`å‹•ç”¨é å‚™é‡‘ -${reserveUsed} U`, "warning");

        const ethRatio = parseFloat(draft.ethBtcRatio);
        const adaRatio = parseFloat(draft.adaBtcRatio);
        checkAlerts(
          Number.isFinite(ethRatio) ? ethRatio : inputs.ethBtcRatio,
          Number.isFinite(adaRatio) ? adaRatio : inputs.adaBtcRatio,
          newState
        );

        setModal({
          title: "åŸ·è¡Œå ±å‘Š",
          content: (
            <div className="space-y-2 text-sm">
              <p className="text-yellow-300 font-bold">{action}</p>
              <p>æŠ•å…¥è³‡é‡‘ï¼š<span className="text-white font-mono">{usdtSpent} U</span></p>
              <p>å­˜å…¥é å‚™ï¼š<span className="text-white font-mono">{usdtSaved} U</span></p>
              {reserveUsed > 0 && <p>å‹•ç”¨é å‚™ï¼š<span className="text-red-300 font-mono">{reserveUsed} U</span></p>}
              <p>ç²å¾— BTCï¼š<span className="text-green-300 font-mono">{btcBought.toFixed(8)}</span></p>
              <hr className="border-gray-600"/>
              <p>ç¸½ BTCï¼š<span className="text-white font-mono">{(newState.btc + newState.coldWalletCount).toFixed(6)}</span></p>
            </div>
          )
        });
      };

      const moveToColdWallet = () => {
        if (gameState.btc < 0.05) {
          setModal({ title: "æŒ‡ä»¤æ‹’çµ•", content: "æœªé” 0.05 BTC é–€æª»ï¼Œè«‹ç¯€çœæ‰‹çºŒè²»ã€‚" });
          return;
        }
        const amount = gameState.btc;
        setGameState(prev => ({ ...prev, btc: 0, coldWalletCount: prev.coldWalletCount + amount }));
        addLog(`æé ˜ ${amount.toFixed(6)} BTC è‡³å†·éŒ¢åŒ…`, "secure");
        setModal({ title: "è³‡ç”¢è½‰ç§»å®Œæˆ", content: `æˆåŠŸç§»å…¥å†·éŒ¢åŒ…ï¼š${amount.toFixed(6)} BTC` });
      };

      const resetAll = () => {
        if (!confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰è³‡æ–™ï¼Ÿï¼ˆæœƒæ¸…ç©º localStorageï¼‰")) return;
        localStorage.removeItem(SAVE_KEY);
        setGameState(INITIAL_STATE);
        setModal({ title:"å·²é‡ç½®", content:"è³‡æ–™å·²æ¸…ç©ºï¼Œé‡æ–°é–‹å§‹ã€‚" });
      };

      const fngColor = () => {
        const n = inputs.fngIndex;
        if (n < 20) return "text-red-300";
        if (n <= 40) return "text-yellow-300";
        if (n <= 75) return "text-gray-200";
        return "text-green-300";
      };

      const StatusBar = () => (
        <div className="bg-gray-800 p-4 retro-container mb-4">
          <div className="flex items-start justify-between gap-3">
            <div>
              <div className="pixel-font text-green-300 text-sm mb-1">
                LV.{Math.floor(totalBTC()*10)} å®ˆè­·è€…
              </div>
              <div className="text-xs text-gray-400">å‰©é¤˜ {daysRemaining} å¤©</div>
              <div className="text-xs text-gray-500">åŸ·è¡Œäººï¼šé™³ç¥¥è±ª</div>
            </div>
            <button onClick={resetAll} className="text-xs bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded retro-btn">
              é‡ç½®
            </button>
          </div>

          <div className="mt-3">
            <div className="flex justify-between text-xs text-gray-400 mb-1 font-mono">
              <span>é€²åº¦</span>
              <span>{totalBTC().toFixed(6)} / {GOAL_BTC.toFixed(2)} BTC</span>
            </div>
            <div className="w-full bg-gray-900 h-3 rounded-full overflow-hidden border border-gray-700">
              <div className="h-full bg-gradient-to-r from-green-600 to-emerald-400" style={{ width: progress()+"%" }} />
            </div>
          </div>
        </div>
      );

      const Inventory = () => (
        <div className="grid grid-cols-2 gap-3 mb-4">
          <div className="bg-gray-800 p-4 rounded-xl border-l-4 border-green-500">
            <div className="text-xs text-gray-400 font-bold mb-1">ç†±éŒ¢åŒ… BTC</div>
            <div className="text-2xl font-bold font-mono">{gameState.btc.toFixed(6)}</div>
            <button onClick={moveToColdWallet} className="mt-3 w-full bg-blue-700 hover:bg-blue-600 text-white py-2 rounded retro-btn text-sm">
              æé ˜è‡³å†·éŒ¢åŒ…
            </button>
            <div className="text-[11px] text-gray-500 mt-2">é–€æª»ï¼š0.05 BTC</div>
          </div>

          <div className="bg-gray-800 p-4 rounded-xl border-l-4 border-blue-500">
            <div className="text-xs text-gray-400 font-bold mb-1">å†·éŒ¢åŒ… BTC</div>
            <div className="text-2xl font-bold font-mono">{gameState.coldWalletCount.toFixed(6)}</div>
            <div className="text-[11px] text-gray-500 mt-2">çµ•å°é˜²ç¦¦é ˜åŸŸ</div>
          </div>

          <div className="bg-gray-800 p-4 rounded-xl border-l-4 border-yellow-500 col-span-2">
            <div className="flex justify-between items-center">
              <div>
                <div className="text-xs text-gray-400 font-bold mb-1">é å‚™é‡‘ USDT</div>
                <div className="text-2xl font-bold font-mono">${gameState.usdtReserve.toLocaleString()}</div>
              </div>
              <div className="text-xs text-gray-500 text-right">é»‘å¤©éµå½ˆè—¥åº«</div>
            </div>
          </div>

          <div className="bg-gray-800 p-4 rounded-xl border-l-4 border-purple-500 col-span-2">
            <div className="text-xs text-gray-400 font-bold mb-2">ALTCOINS</div>
            <div className="grid grid-cols-2 gap-3 text-sm">
              <div className="bg-gray-900 p-3 rounded">
                <div className="text-gray-400 text-xs mb-1">ETH</div>
                <div className="font-mono text-lg">{gameState.eth.toFixed(2)}</div>
              </div>
              <div className="bg-gray-900 p-3 rounded">
                <div className="text-gray-400 text-xs mb-1">ADA</div>
                <div className="font-mono text-lg">{gameState.ada.toLocaleString()}</div>
              </div>
            </div>
          </div>
        </div>
      );

      const Dashboard = () => (
        <div className="space-y-4">
          <div className="bg-gray-800 p-5 rounded-xl retro-container">
            <h2 className="pixel-font text-green-300 text-sm mb-4">âš¡ æˆ°è¡“æŒ‡æ®ä¸­å¿ƒï¼ˆæ¯é€±åŸ·è¡Œï¼‰</h2>

            <label className="text-xs text-gray-400 block mb-1">æœ¬é€± BTC åƒ¹æ ¼ (USDT)</label>
            <input
              inputMode="decimal"
              className="w-full bg-gray-900 text-white p-3 rounded-lg border border-gray-700 text-lg font-mono"
              value={draft.btcPrice}
              onInput={(e)=>setDraft(d=>({...d, btcPrice: e.target.value}))}
              onBlur={syncDraftToInputs}
            />

            {/* âœ… 1. æè²ªæŒ‡æ•¸ç”¨æ‹‰çš„ */}
            <div className="mt-4">
              <label className="text-xs text-gray-400 block mb-2">
                ææ‡¼èˆ‡è²ªå©ªæŒ‡æ•¸ï¼ˆ0-100ï¼‰ï¼š
                <span className={"ml-2 font-mono " + fngColor()}>{inputs.fngIndex}</span>
              </label>

              <input
                type="range"
                min="0"
                max="100"
                value={inputs.fngIndex}
                onInput={(e)=>setInputs(p=>({...p, fngIndex: parseInt(e.target.value,10)}))}
                className="w-full accent-green-500"
              />

              <div className="flex justify-between text-xs mt-1 text-gray-500">
                <span className="text-red-300">ææ…Œ</span>
                <span>ä¸­æ€§</span>
                <span className="text-green-300">è²ªå©ª</span>
              </div>
            </div>

            {/* ç›£æ§æ•¸æ“š */}
            <div className="mt-4 border-t border-gray-700 pt-4">
              <div className="text-xs text-gray-400 mb-2">ç›£æ§æ•¸æ“šï¼ˆé¸å¡«ï¼‰</div>
              <div className="grid grid-cols-2 gap-3">
                <div>
                  <label className="text-[11px] text-gray-500">ETH/BTC åŒ¯ç‡</label>
                  <input
                    inputMode="decimal"
                    className="w-full bg-gray-900 p-2 rounded border border-gray-700 font-mono"
                    value={draft.ethBtcRatio}
                    onInput={(e)=>setDraft(d=>({...d, ethBtcRatio: e.target.value}))}
                    onBlur={syncDraftToInputs}
                  />
                </div>
                <div>
                  <label className="text-[11px] text-gray-500">ADA/BTC åŒ¯ç‡</label>
                  <input
                    inputMode="decimal"
                    className="w-full bg-gray-900 p-2 rounded border border-gray-700 font-mono"
                    value={draft.adaBtcRatio}
                    onInput={(e)=>setDraft(d=>({...d, adaBtcRatio: e.target.value}))}
                    onBlur={syncDraftToInputs}
                  />
                </div>
              </div>
            </div>

            <button
              onClick={executeWeeklyStrategy}
              className="mt-5 w-full bg-green-600 hover:bg-green-500 active:bg-green-700 text-white font-bold py-4 rounded-xl retro-btn"
            >
              åŸ·è¡Œæ¯é€±æ±ºç­–ï¼ˆEXECUTEï¼‰
            </button>
          </div>

          <div className="bg-black border border-gray-700 p-4 rounded-lg h-60 overflow-y-auto font-mono text-xs">
            <div className="sticky top-0 bg-black/90 pb-2 border-b border-gray-800 mb-2 text-gray-500">
              &gt; SYSTEM LOGS
            </div>
            {gameState.logs.length === 0 && <div className="text-gray-600">ç­‰å¾…æŒ‡ä»¤...</div>}
            {gameState.logs.map(log => (
              <div key={log.id} className="mb-2 border-b border-gray-900 pb-1">
                <span className="text-gray-500">[{log.date}]</span>
                <span className={"ml-2 " + (
                  log.type === "alert" ? "text-red-300 font-bold" :
                  log.type === "success" ? "text-green-300" :
                  log.type === "warning" ? "text-yellow-300" :
                  log.type === "secure" ? "text-blue-300" :
                  log.type === "system" ? "text-gray-300" : "text-gray-200"
                )}>
                  {log.msg}
                </span>
              </div>
            ))}
          </div>
        </div>
      );

      const Strategy = () => (
        <div className="bg-gray-800 p-5 rounded-xl retro-container">
          <h2 className="pixel-font text-purple-300 text-sm mb-3">âš”ï¸ æˆ°ç•¥è½‰æ›ï¼ˆæé†’ï¼‰</h2>
          <div className="text-sm text-gray-300 space-y-3">
            <div className="bg-gray-900 p-4 rounded border-l-4 border-purple-600">
              <div className="font-bold">ETH ç­–ç•¥</div>
              <div className="text-xs text-gray-500 mt-1">ç›®å‰ ETHï¼š{gameState.eth.toFixed(2)}</div>
              <div className="mt-2 text-xs space-y-1">
                <div className={inputs.ethBtcRatio >= 0.06 ? "text-yellow-300 font-bold" : ""}>â€¢ 0.060ï¼šç¬¬ä¸€éš</div>
                <div className={inputs.ethBtcRatio >= 0.065 ? "text-yellow-300 font-bold" : ""}>â€¢ 0.065ï¼šç¬¬äºŒéš</div>
                <div className={inputs.ethBtcRatio >= 0.075 ? "text-yellow-300 font-bold" : ""}>â€¢ 0.075ï¼šç¬¬ä¸‰éš</div>
              </div>
            </div>

            <div className="bg-gray-900 p-4 rounded border-l-4 border-blue-600">
              <div className="font-bold">ADA é€ƒç”Ÿè‰™</div>
              <div className="text-xs text-gray-500 mt-1">ç›®å‰ ADAï¼š{gameState.ada.toLocaleString()}</div>
              <div className="mt-2 text-xs space-y-1">
                <div className={inputs.adaBtcRatio >= 0.000010 ? "text-red-300 font-bold" : ""}>â€¢ 0.000010ï¼šç¬¬ä¸€éš</div>
                <div className={inputs.adaBtcRatio >= 0.000013 ? "text-red-300 font-bold" : ""}>â€¢ 0.000013ï¼šç¬¬äºŒéš</div>
              </div>
            </div>

            <div className="text-xs text-gray-500">
              *åŒ¯ç‡è¼¸å…¥åœ¨ã€Œæ¯é€±ä»»å‹™ã€é ï¼Œé€™è£¡åªåšæç¤ºé¡¯ç¤ºã€‚
            </div>
          </div>
        </div>
      );

      const Constitution = () => (
        <div className="bg-gray-800 p-5 rounded-xl retro-container text-gray-200 space-y-3">
          <h2 className="pixel-font text-yellow-300 text-sm mb-2">ğŸ“œ æ†²æ³•ï¼ˆSOPï¼‰</h2>
          <div className="bg-gray-900 p-4 rounded">
            <div className="font-bold mb-1">1. å®šæŠ•ç´€å¾‹</div>
            <div className="text-sm text-gray-300">ææ…Œ(&lt;20) å…¨åŠ›è²·é€²ï¼›è²ªå©ª(&gt;75) è½‰å­˜ Uã€‚ä¸åšé æ¸¬ï¼ŒåªåŸ·è¡Œè¦å‰‡ã€‚</div>
          </div>
          <div className="bg-gray-900 p-4 rounded">
            <div className="font-bold mb-1">2. å†·éŒ¢åŒ…éµå¾‹</div>
            <div className="text-sm text-gray-300">äº¤æ˜“æ‰€ç´¯ç©æ»¿ <span className="text-red-300 font-bold">0.05 BTC</span> å¿…é ˆæé ˜ã€‚</div>
          </div>
          <div className="bg-gray-900 p-4 rounded">
            <div className="font-bold mb-1">3. è‡ªæˆ‘å¥‘ç´„</div>
            <div className="text-sm text-gray-400 italic border-l-2 border-gray-700 pl-3">
              "æˆ‘ä¸é æ¸¬å¸‚å ´ï¼Œæˆ‘åªåŸ·è¡Œè¦å‰‡ã€‚åªè¦æ´»è‘—ï¼Œæ™‚é–“æœƒå¸¶æˆ‘åˆ°çµ‚é»ã€‚"
            </div>
          </div>
        </div>
      );

      return (
        <div className="crt min-h-screen">
          {modal && (
            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4">
              <div className="bg-gray-800 rounded-xl max-w-sm w-full p-6 border border-gray-600 shadow-2xl">
                <h3 className="text-lg font-bold text-white mb-4">{modal.title}</h3>
                <div className="text-gray-300 mb-6">{modal.content}</div>
                <button onClick={()=>setModal(null)} className="w-full bg-gray-700 hover:bg-gray-600 py-3 rounded-lg text-white font-bold retro-btn">
                  ç¢ºèª
                </button>
              </div>
            </div>
          )}

          <div className="max-w-3xl mx-auto p-4 pb-28">
            <header className="text-center mb-4">
              <div className="pixel-font text-2xl text-white">PROJECT 2030</div>
              <div className="text-xs text-gray-500 tracking-widest mt-1">çµ‚æ¥µé˜²ç¦¦ï¼åŸ·è¡Œæ†²æ³•</div>
            </header>

            <StatusBar />
            <Inventory />

            <div className="flex gap-2 mb-4">
              <button className={"px-3 py-2 rounded text-xs pixel-font " + (activeTab==="dashboard" ? "bg-green-700 text-white" : "bg-gray-800 text-gray-400")}
                onClick={()=>setActiveTab("dashboard")}>æ¯é€±ä»»å‹™</button>
              <button className={"px-3 py-2 rounded text-xs pixel-font " + (activeTab==="strategy" ? "bg-purple-700 text-white" : "bg-gray-800 text-gray-400")}
                onClick={()=>setActiveTab("strategy")}>æˆ°ç•¥è½‰æ›</button>
              <button className={"px-3 py-2 rounded text-xs pixel-font " + (activeTab==="constitution" ? "bg-yellow-700 text-white" : "bg-gray-800 text-gray-400")}
                onClick={()=>setActiveTab("constitution")}>æ†²æ³•</button>
            </div>

            {activeTab === "dashboard" && <Dashboard />}
            {activeTab === "strategy" && <Strategy />}
            {activeTab === "constitution" && <Constitution />}
          </div>

          <div className="fixed bottom-0 left-0 right-0 bg-gray-900/90 border-t border-gray-700 pb-safe z-40">
            <div className="max-w-3xl mx-auto px-2">
              <div className="flex justify-around items-center h-16">
                <button onClick={()=>setActiveTab("dashboard")}
                  className={"flex flex-col items-center justify-center w-full h-full " + (activeTab==="dashboard" ? "text-green-300" : "text-gray-500")}>
                  <div className="pixel-font text-[10px]">HOME</div>
                  <div className="text-[10px] mt-1">è¡Œå‹•</div>
                </button>
                <button onClick={()=>setActiveTab("strategy")}
                  className={"flex flex-col items-center justify-center w-full h-full " + (activeTab==="strategy" ? "text-purple-300" : "text-gray-500")}>
                  <div className="pixel-font text-[10px]">ALERT</div>
                  <div className="text-[10px] mt-1">æˆ°ç•¥</div>
                </button>
                <button onClick={()=>setActiveTab("constitution")}
                  className={"flex flex-col items-center justify-center w-full h-full " + (activeTab==="constitution" ? "text-yellow-300" : "text-gray-500")}>
                  <div className="pixel-font text-[10px]">SOP</div>
                  <div className="text-[10px] mt-1">æ†²æ³•</div>
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
